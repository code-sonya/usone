{% extends "dashboard/layout.html" %}


{% block title %}
  회의록
{% endblock %}


{% block css %}

  <style type="text/css">

    .table {
      color: #333333;
      width: 100%;
    }

    .table td, .table th {
      padding: .5rem;
      vertical-align: middle;
      border-top: 1px solid #e3e6f0;
      font-size: 16px;
      text-align: center;
      /*white-space: nowrap;*/
    }

  </style>

{% endblock %}


{% block content %}

  <div class="row">
    <div class="col-xl-12">
      <div class="card shadow mb-4">
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
          <h6 class="m-0 h3 text-gray-800">회의록</h6>
          <a class="btn btn-danger" href="/service/viewreportpdf/{{ report.reportId }}/" role="button">
            <i class="fas fa-download d-xl-none"></i><span class="d-none d-xl-block"><i class="fas fa-download"></i> PDF</span>
          </a>
        </div>

        <div class="card-body">
          <form id="reportForm" method="POST">{% csrf_token %}
            <table class="table">
              <tr>
                <td class="bg-light" style="width: 15%"><label for="category" class="font-weight-bold text-primary">유형</label></td>
                <td style="width: 35%">{{ report.category }}</td>
                <td class="bg-light" style="width: 15%"><label for="location" class="font-weight-bold text-primary">장소</label></td>
                <td style="width: 35%">{{ report.location }}</td>
              </tr>
              <tr>
                <td class="bg-light" style="width: 15%"><label for="reportDate" class="font-weight-bold text-primary">일자</label></td>
                <td style="width: 35%">{{ report.reportDate }} ({{ report.reportDate | date:"D" | slice:"0:1" }})</td>
                <td class="bg-light" style="width: 15%"><label for="reportTime" class="font-weight-bold text-primary">시간</label></td>
                <td style="width: 35%">{{ report.reportTime | date:"H:i" }}</td>
              </tr>
              <tr>
                <td class="bg-light" style="width: 15%"><label for="leader" class="font-weight-bold text-primary">리더</label></td>
                <td style="width: 35%">{{ report.leader.empName }}</td>
                <td class="bg-light" style="width: 15%"><label for="writer" class="font-weight-bold text-primary">작성자</label></td>
                <td style="width: 35%">{{ report.writer.empName }}</td>
              </tr>
              <tr>
                <td class="bg-light" style="width: 15%"><label for="participants" class="font-weight-bold text-primary">참가자</label></td>
                <td colspan="3" class="text-left pl-4" style="width: 85%">
                  {% for participant in participants %}
                    {% if forloop.last %}
                      {{ participant.empId.empName }}
                    {% else %}
                      {{ participant.empId.empName }},&nbsp;&nbsp;
                    {% endif %}
                  {% endfor %}
                </td>
              </tr>
              <tr>
                <td class="bg-light" style="width: 15%"><label for="title" class="font-weight-bold text-primary">목적</label></td>
                <td colspan="3" style="width: 85%">{{ report.title }}</td>
              </tr>
            </table>
            <div class="overflow-auto text-gray-900">
              {{ report.contents | safe }}
            </div>

            <div class="text-center mt-3">
              <a class="btn btn-secondary" href="/service/showreports/">
                <i class="fas fa-exchange-alt d-xl-none"></i><span class="d-none d-xl-block"><i class="fas fa-exchange-alt"></i> 목록으로</span>
              </a>
              <a href="#" class="btn btn-danger btn-icon-split" onclick="btn_delete()">
                <span class="icon text-white-50"> <i class="fas fa-times"> </i> </span>
                <span class="text"> 삭제 </span>
              </a>
              <a href="#" class="btn btn-success btn-icon-split" onclick="btn_modify()">
                <span class="icon text-white-50"> <i class="fas fa-check"> </i> </span>
                <span class="text"> 수정 </span>
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

{% endblock %}


{% block script %}

  <script type="text/javascript">

      function btn_delete() {
          if (confirm("삭제하시겠습니까?") === true) {
              location.href = '/service/deletereport/{{ report.reportId }}/'
          } else {
              return false;
          }
      }

      function btn_modify() {
          if (confirm("수정하시겠습니까?") === true) {
              location.href = '/service/modifyreport/{{ report.reportId }}/'
          } else {
              return false;
          }
      }

      $(document).ready(function () {

      });

  </script>

{% endblock %}