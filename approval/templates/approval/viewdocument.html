{% extends "dashboard/layout.html" %}


{% block title %}
  전자결재
{% endblock %}


{% block css %}
  <style>
    .pc-table {
      color: #333333;
      table-layout: fixed;
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1rem;
    }

    .pc-table td, .pc-table th {
      padding: 8px 15px;
      vertical-align: middle;
      font-size: 14px;
      border: 1px dotted #858796a3;
    }

    .pc-table-title {
      width: 10%;
      background-color: #f8f9fc;
      text-align: center;
      font-weight: bold;
    }

    .pc-table-detail {
      width: 40%;
      text-align: left;
    }
  </style>
{% endblock %}


{% block content %}
  <form id="documentForm" method="post">{% csrf_token %}</form>

  <div class="card shadow mb-4">
    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
      <h6 class="m-0 h3 text-gray-800">
        {{ document.formId.formNumber }}.
        {{ document.formId.formTitle }}
      </h6>
    </div>

    <div class="card-body">
      <table class="pc-table">
        <tbody>
        <tr>
          <td class="pc-table-title">문서 종류</td>
          <td class="pc-table-detail">
            {{ document.formId.categoryId.firstCategory }} >
            {{ document.formId.categoryId.secondCategory }} >
            {{ document.formId.formTitle }}
          </td>
          <td class="pc-table-title">문서 번호</td>
          <td class="pc-table-detail">{{ document.documentNumber }}</td>
        </tr>
        <tr>
          <td class="pc-table-title">기안 부서</td>
          <td class="pc-table-detail">{{ document.writeEmp.empDeptName }}</td>
          <td class="pc-table-title">기&nbsp;&nbsp;안&nbsp;&nbsp;자</td>
          <td class="pc-table-detail">{{ document.writeEmp.empName }}</td>
        </tr>
        <tr>
          <td class="pc-table-title">보존 연한</td>
          <td class="pc-table-detail">
            {% if document.preservationYear == 9999 %} 영구
            {% else %} {{ document.preservationYear }}년
            {% endif %}
          </td>
          <td class="pc-table-title">보안 등급</td>
          <td class="pc-table-detail">{{ document.securityLevel }}등급</td>
        </tr>
        <tr>
          <td class="pc-table-title">기안 일시</td>
          <td class="pc-table-detail">{{ document.draftDatetime | date:"Y.m.d. H:i:s" }}</td>
          <td class="pc-table-title">완료 일시</td>
          <td class="pc-table-detail">{{ document.approveDatetime | date:"Y.m.d. H:i:s" }}</td>
        </tr>
        <tr>
          <td colspan="4">여기에 결재선 추가해줘야함</td>
        </tr>
        </tbody>
      </table>

      <div class="mt-3 ml-3 text-gray-900">
        <h4 class="mb-4">{{ document.title }}</h4>
        {{ document.contentHtml | safe }}
        <br><hr><br>
        <div class="row">
          <div class="col-6">
            <b>첨부파일</b>
            {% for f in files %}
              <br><a href="/media/{{ f.file }}" download>{{ f.fileName }} ({{ f.fileSize }}MB)</a>
            {% endfor %}
          </div>
          <div class="col-6">
            <b>관련문서</b>
            {% for r in related %}
              <br>
              <a href="/approval/viewdocument/{{ r.relatedDocumentId.documentId }}" target="_blank">
                [{{ r.relatedDocumentId.documentNumber }}]
                {{ r.relatedDocumentId.title }}
              </a>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}


{% block script %}
  <script type="text/javascript">

  </script>
{% endblock %}
